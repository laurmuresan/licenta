<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

    <changeSet author="lmuresan" id="20180118-001">
        <sql>
            <![CDATA[
----------------------------------------------------------------------DIET TABLE-----------------------------------------
					CREATE TABLE "diet"
			(
				"diet_id" BIGINT NOT NULL,
				"name" VARCHAR(100),
				"calories" BIGINT,
				"details" VARCHAR(500),
				"type" VARCHAR(20)
			)
			;

			ALTER TABLE "diet"
			 ADD CONSTRAINT "diet_id"
				PRIMARY KEY ("diet_id")
			;

			CREATE UNIQUE INDEX "xdiet0"
			    ON "diet" ("diet_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE diet_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-002">
        <sql>
            <![CDATA[
----------------------------------------------------------------------EVENT TABLE-----------------------------------------
					CREATE TABLE "event"
			(
				"event_id" BIGINT NOT NULL,
				"name" VARCHAR(100),
				"date" DATE,
				"details" VARCHAR(500),
				"location_id" BIGINT,
				"phone" VARCHAR(20),
				"start_event" TIMESTAMP [ WITHOUT TIMEZONE ],
				"end_event" TIMESTAMP [ WITHOUT TIMEZONE ]
			)
			;

			ALTER TABLE "event"
			 ADD CONSTRAINT "event_id"
				PRIMARY KEY ("event_id")
			;

			CREATE UNIQUE INDEX "xevent0"
			    ON "event" ("event_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE event_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-003">
        <sql>
            <![CDATA[
----------------------------------------------------------------------FOOD TABLE-----------------------------------------
					CREATE TABLE "food"
			(
				"food_id" BIGINT NOT NULL,
				"name" VARCHAR(100),
				"type" VARCHAR(100),
				"calories" BIGINT,
				"saturated_fat" DOUBLE PRECISION,
				"trans_fat" DOUBLE PRECISION,
				"cholesterol" DOUBLE PRECISION,
				"sodium" DOUBLE PRECISION,
				"dietary_fiber" DOUBLE PRECISION,
				"sugars" DOUBLE PRECISION,
				"protein" DOUBLE PRECISION
			)
			;

			ALTER TABLE "food"
			 ADD CONSTRAINT "food_id"
				PRIMARY KEY ("food_id")
			;

			CREATE UNIQUE INDEX "xfood0"
			    ON "diet" ("food_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE food_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-004">
        <sql>
            <![CDATA[
----------------------------------------------------------------------VITAMIN TABLE-----------------------------------------
					CREATE TABLE "vitamin"
			(
				"vitamin_id" BIGINT NOT NULL,
				"name" VARCHAR(100),
				"percent" INT
			)
			;

			ALTER TABLE "vitamin"
			 ADD CONSTRAINT "vitamin_id"
				PRIMARY KEY ("vitamin_id")
			;

			CREATE UNIQUE INDEX "xvitamin0"
			    ON "vitamin" ("vitamin_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE vitamin_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-005">
        <sql>
            <![CDATA[
----------------------------------------------------------------------GYM TABLE-----------------------------------------
					CREATE TABLE "gym"
			(
				"gym_id" BIGINT NOT NULL,
				"name" VARCHAR(100),
				"location" BIGINT,
				"website", VARCHAR(100),
				"details" VARCHAR(100),
				"phone" VARCHAR(100),
				"type" VARCHAR(100),
				"monday_friday_open" TIME [ WITHOUT TIMEZONE ],
				"monday_friday_close" TIME [ WITHOUT TIMEZONE ],
				"saturday_open" TIME [ WITHOUT TIMEZONE ],
				"saturday_close" TIME [ WITHOUT TIMEZONE ],
				"sunday_open" TIME [ WITHOUT TIMEZONE ],
				"sunday_close" TIME [ WITHOUT TIMEZONE ],
				"company" BIGINT
			)
			;

			ALTER TABLE "gym"
			 ADD CONSTRAINT "gym_id"
				PRIMARY KEY ("gym_id")
			;

			CREATE UNIQUE INDEX "xgym0"
			    ON "gym" ("gym_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE gym_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-006">
        <sql>
            <![CDATA[
----------------------------------------------------------------------MEAL TABLE-----------------------------------------
					CREATE TABLE "meal"
			(
				"meal_id" BIGINT NOT NULL,
				"calories" INT,
				"type" VARCHAR(100)
			)
			;

			ALTER TABLE "meal"
			 ADD CONSTRAINT "meal_id"
				PRIMARY KEY ("meal_id")
			;

			CREATE UNIQUE INDEX "xmeal0"
			    ON "meal" ("meal_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE meal_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-007">
        <sql>
            <![CDATA[
----------------------------------------------------------------------PHOTO TABLE-----------------------------------------
					CREATE TABLE "photo"
			(
				"photo_id" BIGINT NOT NULL,
				"photo" TEXT
			)
			;

			ALTER TABLE "photo"
			 ADD CONSTRAINT "photo_id"
				PRIMARY KEY ("photo_id")
			;

			CREATE UNIQUE INDEX "xphoto0"
			    ON "photo" ("photo_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE photo_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-008">
        <sql>
            <![CDATA[
----------------------------------------------------------------------ROLE TABLE-----------------------------------------
					CREATE TABLE "role"
			(
				"role_id" BIGINT NOT NULL,
				"type" VARCHAR(100)
			)
			;

			ALTER TABLE "photo"
			 ADD CONSTRAINT "role_id"
				PRIMARY KEY ("role_id")
			;

			CREATE UNIQUE INDEX "xrole0"
			    ON "role" ("role_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE role_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>


    <changeSet author="lmuresan" id="20180118-009">
        <sql>
            <![CDATA[
----------------------------------------------------------------------USER TABLE-----------------------------------------
					CREATE TABLE "user"
			(
				"user_id" BIGINT NOT NULL,
				"first_name" VARCHAR(50),
				"last_name" VARCHAR(50),
				"email" VARCHAR(100),
				"username" VARCHAR(50),
				"gender" VARCHAR(10),
				"birth_date" DATE,
				"height" DOUBLE PRECISION,
				"weight" DOUBLE PRECISION,
				"phone_number" VARCHAR(15),
				"address" VARCHAR(100),
				"role" VARCHAR(15),
				"photo" TEXT
			)
			;

			ALTER TABLE "user"
			 ADD CONSTRAINT "user_id"
				PRIMARY KEY ("user_id")
			;

			CREATE UNIQUE INDEX "xuser0"
			    ON "user" ("user_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE user_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-010">
        <sql>
            <![CDATA[
----------------------------------------------------------------------DAILY-REPORT TABLE-----------------------------------------
					CREATE TABLE "daily_report"
			(
				"daily_report_id" BIGINT NOT NULL,
				"date" DATE,
				"weight" DOUBLE PRECISION,
				"calories" INT,
				"message_report" VARCHAR(300)
			)
			;

			ALTER TABLE "daily_report"
			 ADD CONSTRAINT "daily_report_id"
				PRIMARY KEY ("dailyreport_id")
			;

			CREATE UNIQUE INDEX "xdaily_report0"
			    ON "daily_report" ("daily_report_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE user_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-011">
        <sql>
            <![CDATA[
----------------------------------------------------------------------LOCATION TABLE-----------------------------------------
					CREATE TABLE "location"
			(
				"location_id" BIGINT NOT NULL,
				"address" VARCHAR(100),
				"longitude" DOUBLE PRECISION,
				"latitude" DOUBLE PRECISION
			)
			;

			ALTER TABLE "location"
			 ADD CONSTRAINT "location_id"
				PRIMARY KEY ("location_id")
			;

			CREATE UNIQUE INDEX "xlocation0"
			    ON "location" ("location_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE location_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-012">
        <sql>
            <![CDATA[
----------------------------------------------------------------------DAILY REPORT USER-----------------------------------------
					CREATE TABLE "daily_report_user"
			(
				"user_id" BIGINT NOT NULL,
				"daily_report_id" BIGINT NOT NULL
            )
			;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-013">
        <sql>
            <![CDATA[
----------------------------------------------------------------------COMPANY TABLE-----------------------------------------
					CREATE TABLE "company"
			(
				"company_id" BIGINT NOT NULL,
				"name" VARCHAR(50),
				"location" BIGINT,
				"phone" VARCHAR(30),
				"social_media_link" VARCHAR(50),
				"description" VARCHAR(300)
			)
			;

			ALTER TABLE "company"
			 ADD CONSTRAINT "company_id"
				PRIMARY KEY ("company_id")
			;

			CREATE UNIQUE INDEX "xcompany0"
			    ON "company" ("company_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE company_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-013">
        <sql>
            <![CDATA[
----------------------------------------------------------------------GOAL TABLE-----------------------------------------
					CREATE TABLE "goal"
			(
				"goal_id" BIGINT NOT NULL,
				"weight" DOUBLE PRECISION,
				"deadline" DATE
				)
			;

			ALTER TABLE "goal"
			 ADD CONSTRAINT "goal_id"
				PRIMARY KEY ("goal_id")
			;

			CREATE UNIQUE INDEX "xgoal0"
			    ON "goal" ("goal_id")
			 TABLESPACE pg_default
			  ;

			  	CREATE SEQUENCE goal_seq
				INCREMENT BY 1
				START WITH 1
				MINVALUE 1
				MAXVALUE 9999999999999999
				CACHE 1
				;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-012">
        <sql>
            <![CDATA[
----------------------------------------------------------------------USER GOAL-----------------------------------------
					CREATE TABLE "user_goal"
			(
				"user_id" BIGINT NOT NULL,
				"goal_id" BIGINT NOT NULL
			)
			;
         ]]>
        </sql>
    </changeSet>

    <changeSet author="lmuresan" id="20180118-014">
        <sql>
            <![CDATA[
----------------------------------------------------------------------CONSTRAINS AND FK KEYS-----------------------------------------

    ALTER TABLE "event"
    ADD CONSTRAINT "fk_location_id"
    FOREIGN KEY ("location_id") REFERENCES "location" ("location_id")
    ;

    CREATE INDEX "xlocation1"
    ON "event" ("location_id")
    TABLESPACE pg_default
    ;

    ALTER TABLE "gym"
    ADD CONSTRAINT "fk_location_id"
    FOREIGN KEY ("location_id") REFERENCES "location" ("location_id")
    ;

    CREATE INDEX "xlocation2"
    ON "gym" ("location_id")
    TABLESPACE pg_default
    ;


         ]]>
        </sql>
    </changeSet>

</databaseChangeLog>
